<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 27.2.

Copyright (C) 1990-1996, 1998-2021 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rev="made" href="mailto:bug-gnu-emacs@gnu.org">
<link rel="icon" type="image/png" href="/graphics/gnu-head-mini.png">
<meta name="ICBM" content="42.256233,-71.006581">
<meta name="DC.title" content="gnu.org">

<style type="text/css">
@import url('/software/emacs/manual.css');
</style>
</head>

<body lang="en">
<span id="Time-Parsing"></span><div class="header" style="background-color:#DDDDFF">
<p>
Next: <a href="Processor-Run-Time.html" accesskey="n" rel="next">Processor Run Time</a>, Previous: <a href="Time-Conversion.html" accesskey="p" rel="prev">Time Conversion</a>, Up: <a href="System-Interface.html" accesskey="u" rel="up">System Interface</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>

<span id="Parsing-and-Formatting-Times"></span><h3 class="section">40.8 Parsing and Formatting Times</h3>
<span id="index-time-parsing"></span>
<span id="index-time-formatting"></span>
<span id="index-formatting-time-values"></span>

<p>These functions convert time values to text in a string, and vice versa.
Time values include <code>nil</code>, numbers, and Lisp timestamps
(see <a href="Time-of-Day.html">Time of Day</a>).
</p>
<dl>
<dt id="index-date_002dto_002dtime">Function: <strong>date-to-time</strong> <em>string</em></dt>
<dd><p>This function parses the time-string <var>string</var> and returns the
corresponding Lisp timestamp.  The argument <var>string</var> should represent
a date-time, and should be in one of the forms recognized by
<code>parse-time-string</code> (see below).  This function assumes Universal
Time if <var>string</var> lacks explicit time zone information.
The operating system limits the range of time and zone values.
</p></dd></dl>

<dl>
<dt id="index-parse_002dtime_002dstring">Function: <strong>parse-time-string</strong> <em>string</em></dt>
<dd><p>This function parses the time-string <var>string</var> into a list of the
following form:
</p>
<div class="example">
<pre class="example">(<var>sec</var> <var>min</var> <var>hour</var> <var>day</var> <var>mon</var> <var>year</var> <var>dow</var> <var>dst</var> <var>tz</var>)
</pre></div>

<p>The format of this list is the same as what <code>decode-time</code> accepts
(see <a href="Time-Conversion.html">Time Conversion</a>), and is described in more detail there.  Any
element that cannot be determined from the input will be set to
<code>nil</code>.  The argument <var>string</var> should resemble an RFC 822 (or later) or
ISO 8601 string, like &ldquo;Fri, 25 Mar 2016 16:24:56 +0100&rdquo; or
&ldquo;1998-09-12T12:21:54-0200&rdquo;, but this function will attempt to parse
less well-formed time strings as well.
</p></dd></dl>

<span id="index-ISO-8601-date_002ftime-strings"></span>
<dl>
<dt id="index-iso8601_002dparse">Function: <strong>iso8601-parse</strong> <em>string</em></dt>
<dd><p>For a more strict function (that will error out upon invalid input),
this function can be used instead.  It can parse all variants of
the ISO 8601 standard, so in addition to the formats mentioned above,
it also parses things like &ldquo;1998W45-3&rdquo; (week number) and
&ldquo;1998-245&rdquo; (ordinal day number).  To parse durations, there&rsquo;s
<code>iso8601-parse-duration</code>, and to parse intervals, there&rsquo;s
<code>iso8601-parse-interval</code>.  All these functions return decoded
time structures, except the final one, which returns three of them
(the start, the end, and the duration).
</p></dd></dl>

<dl>
<dt id="index-format_002dtime_002dstring">Function: <strong>format-time-string</strong> <em>format-string &amp;optional time zone</em></dt>
<dd>
<p>This function converts <var>time</var> (or the current time, if
<var>time</var> is omitted or <code>nil</code>) to a string according to
<var>format-string</var>.  The conversion uses the time zone rule <var>zone</var>, which
defaults to the current time zone rule.  See <a href="Time-Zone-Rules.html">Time Zone Rules</a>.  The argument
<var>format-string</var> may contain &lsquo;<samp>%</samp>&rsquo;-sequences which say to
substitute parts of the time.  Here is a table of what the
&lsquo;<samp>%</samp>&rsquo;-sequences mean:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>%a</samp>&rsquo;</dt>
<dd><p>This stands for the abbreviated name of the day of week.
</p></dd>
<dt>&lsquo;<samp>%A</samp>&rsquo;</dt>
<dd><p>This stands for the full name of the day of week.
</p></dd>
<dt>&lsquo;<samp>%b</samp>&rsquo;</dt>
<dd><p>This stands for the abbreviated name of the month.
</p></dd>
<dt>&lsquo;<samp>%B</samp>&rsquo;</dt>
<dd><p>This stands for the full name of the month.
</p></dd>
<dt>&lsquo;<samp>%c</samp>&rsquo;</dt>
<dd><p>This is a synonym for &lsquo;<samp>%x %X</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%C</samp>&rsquo;</dt>
<dd><p>This stands for the century, that is, the year divided by 100,
truncated toward zero.
The default field width is 2.
</p></dd>
<dt>&lsquo;<samp>%d</samp>&rsquo;</dt>
<dd><p>This stands for the day of month, zero-padded.
</p></dd>
<dt>&lsquo;<samp>%D</samp>&rsquo;</dt>
<dd><p>This is a synonym for &lsquo;<samp>%m/%d/%y</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%e</samp>&rsquo;</dt>
<dd><p>This stands for the day of month, blank-padded.
</p></dd>
<dt>&lsquo;<samp>%F</samp>&rsquo;</dt>
<dd><p>This stands for the ISO 8601 date format, which is like
&lsquo;<samp>%+4Y-%m-%d</samp>&rsquo; except that any flags or field width override the
&lsquo;<samp>+</samp>&rsquo; and (after subtracting 6) the &lsquo;<samp>4</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%g</samp>&rsquo;</dt>
<dd><p>This stands for the year corresponding to the ISO week within the century.
</p></dd>
<dt>&lsquo;<samp>%G</samp>&rsquo;</dt>
<dd><p>This stands for the year corresponding to the ISO week.
</p></dd>
<dt>&lsquo;<samp>%h</samp>&rsquo;</dt>
<dd><p>This is a synonym for &lsquo;<samp>%b</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%H</samp>&rsquo;</dt>
<dd><p>This stands for the hour (00&ndash;23).
</p></dd>
<dt>&lsquo;<samp>%I</samp>&rsquo;</dt>
<dd><p>This stands for the hour (01&ndash;12).
</p></dd>
<dt>&lsquo;<samp>%j</samp>&rsquo;</dt>
<dd><p>This stands for the day of the year (001&ndash;366).
</p></dd>
<dt>&lsquo;<samp>%k</samp>&rsquo;</dt>
<dd><p>This stands for the hour (0&ndash;23), blank padded.
</p></dd>
<dt>&lsquo;<samp>%l</samp>&rsquo;</dt>
<dd><p>This stands for the hour (1&ndash;12), blank padded.
</p></dd>
<dt>&lsquo;<samp>%m</samp>&rsquo;</dt>
<dd><p>This stands for the month (01&ndash;12).
</p></dd>
<dt>&lsquo;<samp>%M</samp>&rsquo;</dt>
<dd><p>This stands for the minute (00&ndash;59).
</p></dd>
<dt>&lsquo;<samp>%n</samp>&rsquo;</dt>
<dd><p>This stands for a newline.
</p></dd>
<dt>&lsquo;<samp>%N</samp>&rsquo;</dt>
<dd><p>This stands for the nanoseconds (000000000&ndash;999999999).  To ask for
fewer digits, use &lsquo;<samp>%3N</samp>&rsquo; for milliseconds, &lsquo;<samp>%6N</samp>&rsquo; for
microseconds, etc.  Any excess digits are discarded, without rounding.
</p></dd>
<dt>&lsquo;<samp>%p</samp>&rsquo;</dt>
<dd><p>This stands for &lsquo;<samp>AM</samp>&rsquo; or &lsquo;<samp>PM</samp>&rsquo;, as appropriate.
</p></dd>
<dt>&lsquo;<samp>%q</samp>&rsquo;</dt>
<dd><p>This stands for the calendar quarter (1&ndash;4).
</p></dd>
<dt>&lsquo;<samp>%r</samp>&rsquo;</dt>
<dd><p>This is a synonym for &lsquo;<samp>%I:%M:%S %p</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%R</samp>&rsquo;</dt>
<dd><p>This is a synonym for &lsquo;<samp>%H:%M</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%s</samp>&rsquo;</dt>
<dd><p>This stands for the integer number of seconds since the epoch.
</p></dd>
<dt>&lsquo;<samp>%S</samp>&rsquo;</dt>
<dd><p>This stands for the second (00&ndash;59, or 00&ndash;60 on platforms
that support leap seconds).
</p></dd>
<dt>&lsquo;<samp>%t</samp>&rsquo;</dt>
<dd><p>This stands for a tab character.
</p></dd>
<dt>&lsquo;<samp>%T</samp>&rsquo;</dt>
<dd><p>This is a synonym for &lsquo;<samp>%H:%M:%S</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%u</samp>&rsquo;</dt>
<dd><p>This stands for the numeric day of week (1&ndash;7).  Monday is day 1.
</p></dd>
<dt>&lsquo;<samp>%U</samp>&rsquo;</dt>
<dd><p>This stands for the week of the year (01&ndash;52), assuming that weeks
start on Sunday.
</p></dd>
<dt>&lsquo;<samp>%V</samp>&rsquo;</dt>
<dd><p>This stands for the week of the year according to ISO 8601.
</p></dd>
<dt>&lsquo;<samp>%w</samp>&rsquo;</dt>
<dd><p>This stands for the numeric day of week (0&ndash;6).  Sunday is day 0.
</p></dd>
<dt>&lsquo;<samp>%W</samp>&rsquo;</dt>
<dd><p>This stands for the week of the year (01&ndash;52), assuming that weeks
start on Monday.
</p></dd>
<dt>&lsquo;<samp>%x</samp>&rsquo;</dt>
<dd><p>This has a locale-specific meaning.  In the default locale (named
&lsquo;<samp>C</samp>&rsquo;), it is equivalent to &lsquo;<samp>%D</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%X</samp>&rsquo;</dt>
<dd><p>This has a locale-specific meaning.  In the default locale (named
&lsquo;<samp>C</samp>&rsquo;), it is equivalent to &lsquo;<samp>%T</samp>&rsquo;.
</p></dd>
<dt>&lsquo;<samp>%y</samp>&rsquo;</dt>
<dd><p>This stands for the year without century (00&ndash;99).
</p></dd>
<dt>&lsquo;<samp>%Y</samp>&rsquo;</dt>
<dd><p>This stands for the year with century.
</p></dd>
<dt>&lsquo;<samp>%Z</samp>&rsquo;</dt>
<dd><p>This stands for the time zone abbreviation (e.g., &lsquo;<samp>EST</samp>&rsquo;).
</p></dd>
<dt>&lsquo;<samp>%z</samp>&rsquo;</dt>
<dd><p>This stands for the time zone numerical offset.  The &lsquo;<samp>z</samp>&rsquo; can be
preceded by one, two, or three colons; if plain &lsquo;<samp>%z</samp>&rsquo; stands for
&lsquo;<samp>-0500</samp>&rsquo;, then &lsquo;<samp>%:z</samp>&rsquo; stands for &lsquo;<samp>-05:00</samp>&rsquo;, &lsquo;<samp>%::z</samp>&rsquo;
stands for &lsquo;<samp>-05:00:00</samp>&rsquo;, and &lsquo;<samp>%:::z</samp>&rsquo; is like &lsquo;<samp>%::z</samp>&rsquo;
except it suppresses trailing instances of &lsquo;<samp>:00</samp>&rsquo; so it stands for
&lsquo;<samp>-05</samp>&rsquo; in the same example.
</p></dd>
<dt>&lsquo;<samp>%%</samp>&rsquo;</dt>
<dd><p>This stands for a single &lsquo;<samp>%</samp>&rsquo;.
</p></dd>
</dl>

<p>One or more flag characters can appear immediately after the &lsquo;<samp>%</samp>&rsquo;.
&lsquo;<samp>0</samp>&rsquo; pads with zeros, &lsquo;<samp>+</samp>&rsquo; pads with zeros and also puts
&lsquo;<samp>+</samp>&rsquo; before nonnegative year numbers with more than four digits,
&lsquo;<samp>_</samp>&rsquo; pads with blanks, &lsquo;<samp>-</samp>&rsquo;
suppresses padding, &lsquo;<samp>^</samp>&rsquo; upper-cases letters, and &lsquo;<samp>#</samp>&rsquo;
reverses the case of letters.
</p>
<p>You can also specify the field width and type of padding for any of
these &lsquo;<samp>%</samp>&rsquo;-sequences.  This works as in <code>printf</code>: you write
the field width as digits in a &lsquo;<samp>%</samp>&rsquo;-sequence, after any flags.
For example, &lsquo;<samp>%S</samp>&rsquo; specifies the number of seconds since the minute;
&lsquo;<samp>%03S</samp>&rsquo; means to pad this with zeros to 3 positions, &lsquo;<samp>%_3S</samp>&rsquo; to
pad with spaces to 3 positions.  Plain &lsquo;<samp>%3S</samp>&rsquo; pads with zeros,
because that is how &lsquo;<samp>%S</samp>&rsquo; normally pads to two positions.
</p>
<p>The characters &lsquo;<samp>E</samp>&rsquo; and &lsquo;<samp>O</samp>&rsquo; act as modifiers when used after
any flags and field widths in a &lsquo;<samp>%</samp>&rsquo;-sequence.  &lsquo;<samp>E</samp>&rsquo; specifies
using the current locale&rsquo;s alternative version of the date and time.
In a Japanese locale, for example, <code>%Ex</code> might yield a date format
based on the Japanese Emperors&rsquo; reigns.  &lsquo;<samp>E</samp>&rsquo; is allowed in
&lsquo;<samp>%Ec</samp>&rsquo;, &lsquo;<samp>%EC</samp>&rsquo;, &lsquo;<samp>%Ex</samp>&rsquo;, &lsquo;<samp>%EX</samp>&rsquo;, &lsquo;<samp>%Ey</samp>&rsquo;, and
&lsquo;<samp>%EY</samp>&rsquo;.
</p>
<p>&lsquo;<samp>O</samp>&rsquo; means to use the current locale&rsquo;s alternative
representation of numbers, instead of the ordinary decimal digits.  This
is allowed with most letters, all the ones that output numbers.
</p>
<p>To help debug programs, unrecognized &lsquo;<samp>%</samp>&rsquo;-sequences stand for
themselves and are output as-is.  Programs should not rely on this
behavior, as future versions of Emacs may recognize new
&lsquo;<samp>%</samp>&rsquo;-sequences as extensions.
</p>
<p>This function uses the C library function <code>strftime</code>
(see <a href="https://www.gnu.org/software/libc/manual/html_node/Formatting-Calendar-Time.html#Formatting-Calendar-Time">Formatting Calendar Time</a> in <cite>The GNU C Library Reference
Manual</cite>) to do most of the work.  In order to communicate with that
function, it first converts <var>time</var> and <var>zone</var> to internal form;
the operating system limits the range of time and zone values.
This function also encodes <var>format-string</var> using the coding system
specified by <code>locale-coding-system</code> (see <a href="Locales.html">Locales</a>); after
<code>strftime</code> returns the resulting string,
this function decodes the string using that same coding
system.
</p></dd></dl>

<dl>
<dt id="index-format_002dseconds">Function: <strong>format-seconds</strong> <em>format-string seconds</em></dt>
<dd><p>This function converts its argument <var>seconds</var> into a string of
years, days, hours, etc., according to <var>format-string</var>.  The
argument <var>format-string</var> may contain &lsquo;<samp>%</samp>&rsquo;-sequences which
control the conversion.  Here is a table of what the
&lsquo;<samp>%</samp>&rsquo;-sequences mean:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>%y</samp>&rsquo;</dt>
<dt>&lsquo;<samp>%Y</samp>&rsquo;</dt>
<dd><p>The integer number of 365-day years.
</p></dd>
<dt>&lsquo;<samp>%d</samp>&rsquo;</dt>
<dt>&lsquo;<samp>%D</samp>&rsquo;</dt>
<dd><p>The integer number of days.
</p></dd>
<dt>&lsquo;<samp>%h</samp>&rsquo;</dt>
<dt>&lsquo;<samp>%H</samp>&rsquo;</dt>
<dd><p>The integer number of hours.
</p></dd>
<dt>&lsquo;<samp>%m</samp>&rsquo;</dt>
<dt>&lsquo;<samp>%M</samp>&rsquo;</dt>
<dd><p>The integer number of minutes.
</p></dd>
<dt>&lsquo;<samp>%s</samp>&rsquo;</dt>
<dt>&lsquo;<samp>%S</samp>&rsquo;</dt>
<dd><p>The integer number of seconds.
</p></dd>
<dt>&lsquo;<samp>%z</samp>&rsquo;</dt>
<dd><p>Non-printing control flag.  When it is used, other specifiers must be
given in the order of decreasing size, i.e., years before days, hours
before minutes, etc.  Nothing will be produced in the result string to
the left of &lsquo;<samp>%z</samp>&rsquo; until the first non-zero conversion is
encountered.  For example, the default format used by
<code>emacs-uptime</code> (see <a href="Processor-Run-Time.html">emacs-uptime</a>)
<code>&quot;%Y,&nbsp;%D,&nbsp;%H,&nbsp;%M,&nbsp;%z%S&quot;</code><!-- /@w --> means that the number of seconds
will always be produced, but years, days, hours, and minutes will only
be shown if they are non-zero.
</p></dd>
<dt>&lsquo;<samp>%%</samp>&rsquo;</dt>
<dd><p>Produces a literal &lsquo;<samp>%</samp>&rsquo;.
</p></dd>
</dl>

<p>Upper-case format sequences produce the units in addition to the
numbers, lower-case formats produce only the numbers.
</p>
<p>You can also specify the field width by following the &lsquo;<samp>%</samp>&rsquo; with a
number; shorter numbers will be padded with blanks.  An optional
period before the width requests zero-padding instead.  For example,
<code>&quot;%.3Y&quot;</code> might produce <code>&quot;004 years&quot;</code>.
</p></dd></dl>


<div class="header" style="background-color:#DDDDFF">
<p>
Next: <a href="Processor-Run-Time.html" accesskey="n" rel="next">Processor Run Time</a>, Previous: <a href="Time-Conversion.html" accesskey="p" rel="prev">Time Conversion</a>, Up: <a href="System-Interface.html" accesskey="u" rel="up">System Interface</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
